-- Cricket Benchmark DDL for SQL Server
IF OBJECT_ID('pitchDetails', 'U') IS NOT NULL DROP TABLE pitchDetails;
IF OBJECT_ID('gameDetails', 'U') IS NOT NULL DROP TABLE gameDetails;
IF OBJECT_ID('playerDetails', 'U') IS NOT NULL DROP TABLE playerDetails;
IF OBJECT_ID('teamDetails', 'U') IS NOT NULL DROP TABLE teamDetails;

-- teamDetails table
CREATE TABLE teamDetails (
    teamid INTEGER NOT NULL,
    city VARCHAR(50),
    [name] VARCHAR(50),
    abbr VARCHAR(5),
    leagueid SMALLINT,
    divisionid SMALLINT,
    organizationid SMALLINT,
    levelid SMALLINT,
    homepage VARCHAR(200),
    homevenueid INTEGER,
    statsteamid SMALLINT,
    mlbamteamid SMALLINT,
    mlbamteamname VARCHAR(80),
    mlbclub VARCHAR(20),
    mlborg VARCHAR(3),
    mlblevel VARCHAR(2),
    npbteamid SMALLINT,
    boydteamid INTEGER,
    csteamid VARCHAR(5),
    bisteamid SMALLINT,
    howeteamid SMALLINT,
    pointstreakteamid SMALLINT,
    trackmanteamid VARCHAR(55),
    sportvisionteamid SMALLINT,
    ncaateamid INTEGER,
    schoolid INTEGER,
    active BIT,
    cartwrightteamid VARCHAR(50),
    kboteamid SMALLINT,
    onitteamid INTEGER,
    fieldfxteamid SMALLINT,
    CONSTRAINT pk_teamDetails PRIMARY KEY (teamid)
);

-- playerDetails table
CREATE TABLE playerDetails (
    teamid INTEGER NOT NULL,
    playerid INTEGER NOT NULL,
    lastname VARCHAR(40),
    firstname VARCHAR(40),
    middlename VARCHAR(40),
    usesname VARCHAR(40),
    bats SMALLINT,
    throws SMALLINT,
    agentid SMALLINT,
    agencyid SMALLINT,
    organizationid SMALLINT,
    firstyear SMALLINT,
    lastyear SMALLINT,
    birthdate DATETIME2,
    birthcity VARCHAR(100),
    birthcountry VARCHAR(40),
    birthstate VARCHAR(40),
    college VARCHAR(80),
    isamateur BIT,
    [class] SMALLINT,
    height SMALLINT,
    weight SMALLINT,
    active BIT,
    fatype SMALLINT,
    ison40manroster BIT,
    ebispotentialmnfa BIT,
    position SMALLINT,
    rosterposition SMALLINT,
    primaryposition SMALLINT,
    [number] SMALLINT,
    openingdaymjservice DECIMAL(5,3),
    mjservice DECIMAL(5,3),
    projmjservice DECIMAL(5,3),
    establishedmlb BIT,
    optionsused SMALLINT,
    optionstotal SMALLINT,
    outofoptions BIT,
    hadprioroutright BIT,
    isr5elig BIT,
    r5eligyear SMALLINT,
    mnfayear SMALLINT,
    rosterstate SMALLINT,
    mlbdraftnumber SMALLINT,
    waiversrequireddate DATETIME2,
    assignmentoptiondays SMALLINT,
    prioroutrightdate DATETIME2,
    mncontractyears SMALLINT,
    mnserviceyears SMALLINT,
    mnrosterstatus SMALLINT,
    mjrosterstatus SMALLINT,
    lastupdatedate DATETIME2,
    schoolid INTEGER,
    r4eligyear SMALLINT,
    biourl VARCHAR(200),
    headshoturl VARCHAR(200),
    isinternational BIT,
    countryid SMALLINT,
    mjfayear SMALLINT,
    isr5selection BIT,
    inteligyear SMALLINT,
    coachid INTEGER,
    isactivecoach BIT,
    twoway SMALLINT,
    search_column VARCHAR(4000),
    fourthoptionyears SMALLINT,
    fourthoptionyearslist VARCHAR(100),
    optionyearschargedlist VARCHAR(100),
    optiondayscurrseason INTEGER,
    currentyearoptions SMALLINT,
    currentseasonmlsdays SMALLINT,
    last_game_played INTEGER DEFAULT 0,
    CONSTRAINT pk_playerDetails PRIMARY KEY (teamid, playerid),
    CONSTRAINT fk_playerDetails_team FOREIGN KEY (teamid) REFERENCES teamDetails(teamid) ON DELETE CASCADE
);

-- gameDetails table
CREATE TABLE gameDetails (
    teamid INTEGER NOT NULL,
    gameid INTEGER NOT NULL,
    yearid SMALLINT,
    hometeamid SMALLINT,
    awayteamid SMALLINT,
    homescore SMALLINT,
    awayscore SMALLINT,
    gamedate DATETIME2,
    gametype SMALLINT,
    gamestatus SMALLINT,
    gamenum SMALLINT,
    levelid SMALLINT,
    leagueid SMALLINT,
    venueid INTEGER,
    venueversion SMALLINT,
    statsgamecode INTEGER,
    mlbamgamepk INTEGER,
    mlbamgameid VARCHAR(50),
    npbgameid BIGINT,
    bisgameid INTEGER,
    inbats BIT,
    inhd BIT,
    hasplaydata BIT,
    haspitchdata BIT,
    haspitchfxdata BIT,
    hashitfxdata BIT,
    wplayerid INTEGER,
    lplayerid INTEGER,
    splayerid INTEGER,
    howegameid INTEGER,
    boydgameid INTEGER,
    csgameid VARCHAR(14),
    svgameid INTEGER,
    batsgameid INTEGER,
    trackmangameid VARCHAR(75),
    rvpclientid INTEGER,
    rvpgameid INTEGER,
    ncaagameid BIGINT,
    lastupdatedate DATETIME2,
    ieclientid INTEGER,
    iegameid INTEGER,
    cartwrightgameid VARCHAR(13),
    isnight BIT,
    isturf BIT,
    dhtype SMALLINT,
    hasstatcast BIT,
    kbogameid BIGINT,
    synergygameid CHAR(24),
    hasfieldfxdata BIT,
    usesabs BIT,
    hawkeyegameid INTEGER,
    pointstreakgameid INTEGER,
    roofclosed BIT,
    officialdate DATE,
    originaldate DATE,
    fieldfxgameid VARCHAR(26),
    hasbattracking BIT,
    CONSTRAINT pk_gameDetails PRIMARY KEY (teamid, gameid),
    CONSTRAINT fk_gameDetails_team FOREIGN KEY (teamid) REFERENCES teamDetails(teamid) ON DELETE CASCADE
);

-- pitchDetails table
CREATE TABLE pitchDetails (
    teamid INTEGER NOT NULL,
    gameid INTEGER NOT NULL,
    eventseq SMALLINT,
    pitchseq INTEGER,
    yearid SMALLINT,
    balls SMALLINT,
    strikes SMALLINT,
    result SMALLINT,
    [type] SMALLINT,
    velocity DECIMAL(6,3),
    batterid INTEGER,
    pitcherid INTEGER,
    islastpitch BIT,
    count00 BIT,
    count01 BIT,
    count02 BIT,
    count10 BIT,
    count11 BIT,
    count12 BIT,
    count20 BIT,
    count21 BIT,
    count22 BIT,
    count30 BIT,
    count31 BIT,
    count32 BIT,
    ispitch BIT,
    isball BIT,
    isstrike BIT,
    isswing BIT,
    isinstrikezone BIT,
    isaway BIT,
    isin BIT,
    isup BIT,
    isdown BIT,
    statszone1 CHAR(1),
    statszone2 SMALLINT,
    isofficial BIT,
    outzaway BIT,
    outzin BIT,
    outzup BIT,
    outzdown BIT,
    istake BIT,
    isinplay BIT,
    isfoul BIT,
    isbunt BIT,
    iscontact BIT,
    iscatcherblock BIT,
    iscatcherdrop BIT,
    iscrossup BIT,
    npbcoorx SMALLINT,
    npbcoory SMALLINT,
    pitchtotal SMALLINT,
    bcbefore SMALLINT,
    bcafter SMALLINT,
    outsbefore SMALLINT,
    outsafter SMALLINT,
    scorebattingbefore SMALLINT,
    scorebattingafter SMALLINT,
    islhp BIT,
    islhb BIT,
    repeatpitchseq SMALLINT,
    abpitchseq SMALLINT,
    statstype SMALLINT,
    npbtype SMALLINT,
    batstype SMALLINT,
    charttype SMALLINT,
    fxtype SMALLINT,
    trackmantype SMALLINT,
    rvptype SMALLINT,
    statsvelocity SMALLINT,
    npbvelocity DECIMAL(6,3),
    batsvelocity SMALLINT,
    chartvelocity SMALLINT,
    fxvelocity DECIMAL(6,3),
    trackmanvelocity DECIMAL(6,3),
    rvpvelocity SMALLINT,
    initspeed DECIMAL(6,3),
    breakx DECIMAL(6,3),
    breakz DECIMAL(6,3),
    platex DECIMAL(6,3),
    platez DECIMAL(6,3),
    initposx_55 DECIMAL(6,3),
    initposz_55 DECIMAL(6,3),
    bisresultid SMALLINT,
    [source] SMALLINT,
    ietype SMALLINT,
    ievelocity SMALLINT,
    bistype SMALLINT,
    bisvelocity SMALLINT,
    extension DECIMAL(6,3),
    spinrate DECIMAL(8,3),
    correctedtype SMALLINT,
    pitchindirt BIT,
    statspseq SMALLINT,
    mlbampseq SMALLINT,
    batspseq SMALLINT,
    trackmanpseq SMALLINT,
    rvppseq INTEGER,
    catcherbackpick SMALLINT,
    catcherkneestart SMALLINT,
    catcherkneefall SMALLINT,
    runnersinmotion SMALLINT,
    checkswing SMALLINT,
    throwtoplate SMALLINT,
    kbotype SMALLINT,
    kbovelocity DECIMAL(6,3),
    pstrike DECIMAL(9,7),
    synergytype SMALLINT,
    synergyvelocity DECIMAL(6,3),
    playid UNIQUEIDENTIFIER,
    hawkeyetype SMALLINT,
    hawkeyevelocity DECIMAL(6,3),
    pitchtime DATETIME2,
    breakx54 DECIMAL(6,3),
    breakz54 DECIMAL(6,3),
    pickoffbase SMALLINT,
    mlbamvelocity DECIMAL(6,3),
    mlbampitchtype SMALLINT,
    mlbamspinrate DECIMAL(10,3),
    priormoundvisit BIT,
    priorbattertimeout BIT,
    priordisengagementcount SMALLINT,
    violationreason VARCHAR(50),
    fxsubtype SMALLINT,
    armangle DECIMAL(6,3),
    armangle_source SMALLINT,
    isdisengagement BIT,
    initspeed54 DECIMAL(6,3),
    correctedfxsubtype SMALLINT,
    CONSTRAINT pk_pitchDetails PRIMARY KEY (teamid, gameid)
);

-- Create indexes for better performance
CREATE INDEX idx_playerDetails_teamid ON playerDetails(teamid);
CREATE INDEX idx_playerDetails_last_game_played ON playerDetails(last_game_played);
CREATE INDEX idx_gameDetails_teamid ON gameDetails(teamid);
CREATE INDEX idx_gameDetails_gamedate ON gameDetails(gamedate);
CREATE INDEX idx_pitchDetails_teamid_gameid ON pitchDetails(teamid, gameid); 