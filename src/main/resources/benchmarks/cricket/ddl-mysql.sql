-- Cricket Benchmark DDL for MySQL
SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;

DROP TABLE IF EXISTS pitchDetails;
DROP TABLE IF EXISTS gameDetails;
DROP TABLE IF EXISTS playerDetails;
DROP TABLE IF EXISTS teamDetails;

-- teamDetails table
CREATE TABLE teamDetails (
    teamid INTEGER NOT NULL,
    city VARCHAR(50),
    name VARCHAR(50),
    abbr VARCHAR(5),
    leagueid SMALLINT,
    divisionid SMALLINT,
    organizationid SMALLINT,
    levelid SMALLINT,
    homepage VARCHAR(200),
    homevenueid INTEGER,
    statsteamid SMALLINT,
    mlbamteamid SMALLINT,
    mlbamteamname VARCHAR(80),
    mlbclub VARCHAR(20),
    mlborg VARCHAR(3),
    mlblevel VARCHAR(2),
    npbteamid SMALLINT,
    boydteamid INTEGER,
    csteamid VARCHAR(5),
    bisteamid SMALLINT,
    howeteamid SMALLINT,
    pointstreakteamid SMALLINT,
    trackmanteamid VARCHAR(55),
    sportvisionteamid SMALLINT,
    ncaateamid INTEGER,
    schoolid INTEGER,
    active BOOLEAN,
    cartwrightteamid VARCHAR(50),
    kboteamid SMALLINT,
    onitteamid INTEGER,
    fieldfxteamid SMALLINT,
    PRIMARY KEY (teamid)
);

-- playerDetails table
CREATE TABLE playerDetails (
    teamid INTEGER NOT NULL,
    playerid INTEGER NOT NULL,
    lastname VARCHAR(40),
    firstname VARCHAR(40),
    middlename VARCHAR(40),
    usesname VARCHAR(40),
    bats SMALLINT,
    throws SMALLINT,
    agentid SMALLINT,
    agencyid SMALLINT,
    organizationid SMALLINT,
    firstyear SMALLINT,
    lastyear SMALLINT,
    birthdate DATETIME,
    birthcity VARCHAR(100),
    birthcountry VARCHAR(40),
    birthstate VARCHAR(40),
    college VARCHAR(80),
    isamateur BOOLEAN,
    class SMALLINT,
    height SMALLINT,
    weight SMALLINT,
    active BOOLEAN,
    fatype SMALLINT,
    ison40manroster BOOLEAN,
    ebispotentialmnfa BOOLEAN,
    position SMALLINT,
    rosterposition SMALLINT,
    primaryposition SMALLINT,
    number SMALLINT,
    openingdaymjservice DECIMAL(5,3),
    mjservice DECIMAL(5,3),
    projmjservice DECIMAL(5,3),
    establishedmlb BOOLEAN,
    optionsused SMALLINT,
    optionstotal SMALLINT,
    outofoptions BOOLEAN,
    hadprioroutright BOOLEAN,
    isr5elig BOOLEAN,
    r5eligyear SMALLINT,
    mnfayear SMALLINT,
    rosterstate SMALLINT,
    mlbdraftnumber SMALLINT,
    waiversrequireddate DATETIME,
    assignmentoptiondays SMALLINT,
    prioroutrightdate DATETIME,
    mncontractyears SMALLINT,
    mnserviceyears SMALLINT,
    mnrosterstatus SMALLINT,
    mjrosterstatus SMALLINT,
    lastupdatedate DATETIME,
    schoolid INTEGER,
    r4eligyear SMALLINT,
    biourl VARCHAR(200),
    headshoturl VARCHAR(200),
    isinternational BOOLEAN,
    countryid SMALLINT,
    mjfayear SMALLINT,
    isr5selection BOOLEAN,
    inteligyear SMALLINT,
    coachid INTEGER,
    isactivecoach BOOLEAN,
    twoway SMALLINT,
    search_column VARCHAR(4000),
    fourthoptionyears SMALLINT,
    fourthoptionyearslist VARCHAR(100),
    optionyearschargedlist VARCHAR(100),
    optiondayscurrseason INTEGER,
    currentyearoptions SMALLINT,
    currentseasonmlsdays SMALLINT,
    last_game_played INTEGER DEFAULT 0,
    PRIMARY KEY (teamid, playerid),
    FOREIGN KEY (teamid) REFERENCES teamDetails(teamid) ON DELETE CASCADE
);

-- gameDetails table
CREATE TABLE gameDetails (
    teamid INTEGER NOT NULL,
    gameid INTEGER NOT NULL,
    yearid SMALLINT,
    hometeamid SMALLINT,
    awayteamid SMALLINT,
    homescore SMALLINT,
    awayscore SMALLINT,
    gamedate DATETIME,
    gametype SMALLINT,
    gamestatus SMALLINT,
    gamenum SMALLINT,
    levelid SMALLINT,
    leagueid SMALLINT,
    venueid INTEGER,
    venueversion SMALLINT,
    statsgamecode INTEGER,
    mlbamgamepk INTEGER,
    mlbamgameid VARCHAR(50),
    npbgameid BIGINT,
    bisgameid INTEGER,
    inbats BOOLEAN,
    inhd BOOLEAN,
    hasplaydata BOOLEAN,
    haspitchdata BOOLEAN,
    haspitchfxdata BOOLEAN,
    hashitfxdata BOOLEAN,
    wplayerid INTEGER,
    lplayerid INTEGER,
    splayerid INTEGER,
    howegameid INTEGER,
    boydgameid INTEGER,
    csgameid VARCHAR(14),
    svgameid INTEGER,
    batsgameid INTEGER,
    trackmangameid VARCHAR(75),
    rvpclientid INTEGER,
    rvpgameid INTEGER,
    ncaagameid BIGINT,
    lastupdatedate DATETIME,
    ieclientid INTEGER,
    iegameid INTEGER,
    cartwrightgameid VARCHAR(13),
    isnight BOOLEAN,
    isturf BOOLEAN,
    dhtype SMALLINT,
    hasstatcast BOOLEAN,
    kbogameid BIGINT,
    synergygameid CHAR(24),
    hasfieldfxdata BOOLEAN,
    usesabs BOOLEAN,
    hawkeyegameid INTEGER,
    pointstreakgameid INTEGER,
    roofclosed BOOLEAN,
    officialdate DATE,
    originaldate DATE,
    fieldfxgameid VARCHAR(26),
    hasbattracking BOOLEAN,
    PRIMARY KEY (teamid, gameid),
    FOREIGN KEY (teamid) REFERENCES teamDetails(teamid) ON DELETE CASCADE
);

-- pitchDetails table
CREATE TABLE pitchDetails (
    teamid INTEGER NOT NULL,
    gameid INTEGER NOT NULL,
    eventseq SMALLINT,
    pitchseq INTEGER,
    yearid SMALLINT,
    balls SMALLINT,
    strikes SMALLINT,
    result SMALLINT,
    type SMALLINT,
    velocity DECIMAL(6,3),
    batterid INTEGER,
    pitcherid INTEGER,
    islastpitch BOOLEAN,
    count00 BOOLEAN,
    count01 BOOLEAN,
    count02 BOOLEAN,
    count10 BOOLEAN,
    count11 BOOLEAN,
    count12 BOOLEAN,
    count20 BOOLEAN,
    count21 BOOLEAN,
    count22 BOOLEAN,
    count30 BOOLEAN,
    count31 BOOLEAN,
    count32 BOOLEAN,
    ispitch BOOLEAN,
    isball BOOLEAN,
    isstrike BOOLEAN,
    isswing BOOLEAN,
    isinstrikezone BOOLEAN,
    isaway BOOLEAN,
    isin BOOLEAN,
    isup BOOLEAN,
    isdown BOOLEAN,
    statszone1 CHAR(1),
    statszone2 SMALLINT,
    isofficial BOOLEAN,
    outzaway BOOLEAN,
    outzin BOOLEAN,
    outzup BOOLEAN,
    outzdown BOOLEAN,
    istake BOOLEAN,
    isinplay BOOLEAN,
    isfoul BOOLEAN,
    isbunt BOOLEAN,
    iscontact BOOLEAN,
    iscatcherblock BOOLEAN,
    iscatcherdrop BOOLEAN,
    iscrossup BOOLEAN,
    npbcoorx SMALLINT,
    npbcoory SMALLINT,
    pitchtotal SMALLINT,
    bcbefore SMALLINT,
    bcafter SMALLINT,
    outsbefore SMALLINT,
    outsafter SMALLINT,
    scorebattingbefore SMALLINT,
    scorebattingafter SMALLINT,
    islhp BOOLEAN,
    islhb BOOLEAN,
    repeatpitchseq SMALLINT,
    abpitchseq SMALLINT,
    statstype SMALLINT,
    npbtype SMALLINT,
    batstype SMALLINT,
    charttype SMALLINT,
    fxtype SMALLINT,
    trackmantype SMALLINT,
    rvptype SMALLINT,
    statsvelocity SMALLINT,
    npbvelocity DECIMAL(6,3),
    batsvelocity SMALLINT,
    chartvelocity SMALLINT,
    fxvelocity DECIMAL(6,3),
    trackmanvelocity DECIMAL(6,3),
    rvpvelocity SMALLINT,
    initspeed DECIMAL(6,3),
    breakx DECIMAL(6,3),
    breakz DECIMAL(6,3),
    platex DECIMAL(6,3),
    platez DECIMAL(6,3),
    initposx_55 DECIMAL(6,3),
    initposz_55 DECIMAL(6,3),
    bisresultid SMALLINT,
    source SMALLINT,
    ietype SMALLINT,
    ievelocity SMALLINT,
    bistype SMALLINT,
    bisvelocity SMALLINT,
    extension DECIMAL(6,3),
    spinrate DECIMAL(8,3),
    correctedtype SMALLINT,
    pitchindirt BOOLEAN,
    statspseq SMALLINT,
    mlbampseq SMALLINT,
    batspseq SMALLINT,
    trackmanpseq SMALLINT,
    rvppseq INTEGER,
    catcherbackpick SMALLINT,
    catcherkneestart SMALLINT,
    catcherkneefall SMALLINT,
    runnersinmotion SMALLINT,
    checkswing SMALLINT,
    throwtoplate SMALLINT,
    kbotype SMALLINT,
    kbovelocity DECIMAL(6,3),
    pstrike DECIMAL(9,7),
    synergytype SMALLINT,
    synergyvelocity DECIMAL(6,3),
    playid VARCHAR(36),
    hawkeyetype SMALLINT,
    hawkeyevelocity DECIMAL(6,3),
    pitchtime DATETIME,
    breakx54 DECIMAL(6,3),
    breakz54 DECIMAL(6,3),
    pickoffbase SMALLINT,
    mlbamvelocity DECIMAL(6,3),
    mlbampitchtype SMALLINT,
    mlbamspinrate DECIMAL(10,3),
    priormoundvisit BOOLEAN,
    priorbattertimeout BOOLEAN,
    priordisengagementcount SMALLINT,
    violationreason VARCHAR(50),
    fxsubtype SMALLINT,
    armangle DECIMAL(6,3),
    armangle_source SMALLINT,
    isdisengagement BOOLEAN,
    initspeed54 DECIMAL(6,3),
    correctedfxsubtype SMALLINT,
    PRIMARY KEY (teamid, gameid)
);

-- Create indexes for better performance
CREATE INDEX idx_playerDetails_teamid ON playerDetails(teamid);
CREATE INDEX idx_playerDetails_last_game_played ON playerDetails(last_game_played);
CREATE INDEX idx_gameDetails_teamid ON gameDetails(teamid);
CREATE INDEX idx_gameDetails_gamedate ON gameDetails(gamedate);
CREATE INDEX idx_pitchDetails_teamid_gameid ON pitchDetails(teamid, gameid);

SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS; 